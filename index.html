document.addEventListener('DOMContentLoaded', () => {
    // ------------------------------------
    // 1. Contador Regresivo
    // ------------------------------------
    const targetDate = new Date('December 11, 2025 19:00:00').getTime();

    const countdown = setInterval(() => {
        const now = new Date().getTime();
        const distance = targetDate - now;

        // Cálculos para días, horas, minutos y segundos
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // Función para asegurar que el número tenga dos dígitos (ej: 05)
        const formatTime = (time) => String(time).padStart(2, '0');

        // Mostrar los resultados
        document.getElementById('days').textContent = formatTime(days);
        document.getElementById('hours').textContent = formatTime(hours);
        document.getElementById('minutes').textContent = formatTime(minutes);
        document.getElementById('seconds').textContent = formatTime(seconds);

        // Cuando la cuenta regresiva termina
        if (distance < 0) {
            clearInterval(countdown);
            document.getElementById('countdown').innerHTML = "<span class='dress-style'>¡La Posada ha comenzado!</span>";
        }
    }, 1000);


    // ------------------------------------
    // 2. Reproductor de Audio
    // ------------------------------------
    const music = document.getElementById('christmas-music');
    const playPauseButton = document.getElementById('play-pause-button');
    let isPlaying = false;

    playPauseButton.addEventListener('click', () => {
        if (isPlaying) {
            music.pause();
            playPauseButton.innerHTML = '▶️'; // Ícono de Play
            isPlaying = false;
        } else {
            // Nota: La reproducción automática puede ser bloqueada por el navegador.
            // Se necesita la interacción del usuario.
            music.play().then(() => {
                playPauseButton.innerHTML = '⏸️'; // Ícono de Pause
                isPlaying = true;
            }).catch(error => {
                console.error("La reproducción de audio fue bloqueada:", error);
                alert("El navegador bloqueó la reproducción automática. Presiona el botón de nuevo para intentarlo.");
            });
        }
    });
});
